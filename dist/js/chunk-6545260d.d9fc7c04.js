(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6545260d"],{"0a49":function(t,e,s){var n=s("9b43"),o=s("626a"),i=s("4bf8"),r=s("9def"),a=s("cd1c");t.exports=function(t,e){var s=1==t,c=2==t,l=3==t,u=4==t,f=6==t,d=5==t||f,p=e||a;return function(e,a,h){for(var v,m,_=i(e),g=o(_),b=n(a,h,3),C=r(g.length),w=0,y=s?p(e,C):c?p(e,0):void 0;C>w;w++)if((d||w in g)&&(v=g[w],m=b(v,w,_),t))if(s)y[w]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:y.push(v)}else if(u)return!1;return f?-1:l||u?u:y}}},1169:function(t,e,s){var n=s("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"1bdf":function(t,e,s){"use strict";var n=s("a626"),o=s.n(n);o.a},"20d6":function(t,e,s){"use strict";var n=s("5ca1"),o=s("0a49")(6),i="findIndex",r=!0;i in[]&&Array(1)[i]((function(){r=!1})),n(n.P+n.F*r,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(i)},2841:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"alert_container"},[s("section",{staticClass:"tip_text_container"},[t._m(0),s("p",{staticClass:"tip_text"},[t._v(t._s(t.alertText))]),s("button",{staticClass:"confrim",on:{click:t.closeTip}},[t._v("确认")])])])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tip_icon"},[s("span"),s("span")])}],i={data:function(){return{}},props:["alertText"],methods:{closeTip:function(){this.$emit("closeTip")}}},r=i,a=(s("4826"),s("2877")),c=Object(a["a"])(r,n,o,!1,null,"0d675f64",null);e["a"]=c.exports},"2e04":function(t,e,s){},"3b10":function(t,e,s){},4826:function(t,e,s){"use strict";var n=s("2e04"),o=s.n(n);o.a},"49e1":function(t,e,s){},"572a":function(t,e,s){"use strict";var n=s("f819"),o=s.n(n);o.a},"724a":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loading"},[s("div",{staticClass:"load_img",style:{backgroundPositionY:-100*t.positionY+"px"}})])},o=[],i={data:function(){return{positionY:0,timeid:null}},mounted:function(){var t=this;this.timeid=setInterval((function(){t.positionY++,7===t.positionY&&(t.positionY=0)}),600)}},r=i,a=(s("80d3"),s("2877")),c=Object(a["a"])(r,n,o,!1,null,"71724f19",null);e["a"]=c.exports},"78a4":function(t,e,s){"use strict";var n=s("3b10"),o=s.n(n);o.a},"7f7f":function(t,e,s){var n=s("86cc").f,o=Function.prototype,i=/^\s*function ([^ (]*)/,r="name";r in o||s("9e1e")&&n(o,r,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},"80d3":function(t,e,s){"use strict";var n=s("49e1"),o=s.n(n);o.a},a626:function(t,e,s){},cd1c:function(t,e,s){var n=s("e853");t.exports=function(t,e){return new(n(t))(e)}},e853:function(t,e,s){var n=s("d3f4"),o=s("1169"),i=s("2b4c")("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),n(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}},eacf:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cartControl-wrapper"},[s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count&&0!==t.food.count,expression:"food.count && food.count !== 0"}],staticClass:"cart-decrease",on:{click:function(e){return e.preventDefault(),t.decreaseCart(e)}}},[s("transition",{attrs:{name:"inner"}},[s("span",{staticClass:"inner"},[t._v("-")])])],1)]),s("span",{directives:[{name:"show",rawName:"v-show",value:0!==t.food.count,expression:"food.count !== 0"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),s("span",{staticClass:"cart-add",on:{click:function(e){return e.preventDefault(),t.addCart(e)}}},[t._v("+")]),s("v-alertTip",{directives:[{name:"show",rawName:"v-show",value:t.showTip,expression:"showTip"}],attrs:{alertText:"请先登录"},on:{closeTip:t.goLogin}})],1)},o=[],i=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),r=s("2f62"),a=s("2841");function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(s,!0).forEach((function(e){Object(i["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var u={props:["food"],data:function(){return{showTip:!1}},computed:l({},Object(r["c"])(["userInfo"])),methods:{addCart:function(t){this.userInfo?(this.food.count?this.food.count++:this.$set(this.food,"count",1),this.$emit("result",this.food),this.$emit("func",{posX:t.clientX,posY:t.clientY,ballFlag:!0})):this.showTip=!0},decreaseCart:function(){0!==this.food.count&&(this.food.count--,this.$emit("result",this.food))},goLogin:function(){this.$router.push("/login")}},components:{vAlertTip:a["a"]}},f=u,d=(s("78a4"),s("2877")),p=Object(d["a"])(f,n,o,!1,null,null,null);e["default"]=p.exports},f63a:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"food"}},[t._m(0),s("section",{staticClass:"food"},[s("aside",{staticClass:"tab_nav"},[s("ul",t._l(t.menuList,(function(e,n){return s("li",{key:n,staticClass:"ellipsis",class:{active:t.selected===n},on:{click:function(e){return t.chooseSelected(n)}}},[t._v("\n                    "+t._s(e.name)+"\n                    "),s("div",{staticClass:"num"})])})),0)]),s("section",{staticClass:"food_container"},[s("ul",[s("li",[s("header",{staticClass:"food_container_title"},[s("h3",[t._v(t._s(t.foodList.name))]),s("span",{staticClass:"head_middle ellipsis"},[t._v("是分身无术的放")])])]),t._l(t.foodList.foods,(function(e,n){return s("li",{key:n,staticClass:"food_list"},[s("img",{attrs:{src:t.imgBaseUrl+e.image_path}}),s("section",{staticClass:"food_detail"},[s("h3",{staticClass:"food_name"},[t._v(t._s(e.name))]),s("p",{staticClass:"food_description"},[t._v(t._s(e.description))]),s("p",{staticClass:"food_rating"},[s("span",[t._v(t._s(e.month_sales))]),s("span",[t._v("好评率"+t._s(e.satisfy_rate)+"%")])]),e.activity?s("div",{staticClass:"food_logo"},[s("span",[t._v(t._s(e.activity.image_text))])]):t._e(),t._m(1,!0),s("div",{staticClass:"shopChoose"},[s("cartControl",{attrs:{food:e},on:{func:t.position,result:t.resultFoods}})],1)])])}))],2)])]),s("ShopCart",{attrs:{pos:t.ballPosition,selectFood:t.resultfoods}}),s("transition",{attrs:{name:"loading"}},[s("loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]})],1)],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"head_nav"},[s("div",{staticClass:"tab_left active"},[s("span",[t._v("商品")])]),s("div",{staticClass:"tab_right"},[t._v("评价")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"food_price"},[s("span",[t._v("￥")]),s("span",[t._v("20 元")])])}],i=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("20d6"),s("96cf"),s("3b8d")),r=s("bd86"),a=s("2f62"),c=s("365c"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"shopCart"},[s("div",{staticClass:"content",on:{click:function(e){return e.stopPropagation(),t.toggleList()}}},[s("div",{staticClass:"content-left"},[s("div",{ref:"num",staticClass:"logo-wrapper"},[s("div",{staticClass:"logo",class:{highlight:t.totalCount>0}},[s("i",{staticClass:"fa fa-shopping-cart",class:{highlight:t.totalCount>0}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount > 0"}],staticClass:"num"},[t._v(t._s(t.totalCount))])]),s("div",{staticClass:"price",class:{highlight:t.totalPrice>0}},[t._v("￥"+t._s(t.totalPrice))]),s("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.deliveryPrice)+"元")])]),s("div",{staticClass:"content-right"},[s("div",{staticClass:"pay",class:t.payClass},[0===t.totalPrice?s("div",[t._v(t._s(t.minPrice)+"元起送")]):t._e(),t.totalPrice<t.minPrice?s("div",[t._v("还差￥"+t._s(t.slowCount)+"元起送")]):t._e(),t.totalPrice>=t.minPrice?s("div",{on:{click:function(e){return e.stopPropagation(),t.goPay(e)}}},[t._v("添加订单")]):t._e()])])]),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[s("div",{staticClass:"list-header"},[s("h1",{staticClass:"title"},[t._v("购物车")]),s("span",{staticClass:"empty",on:{click:t.empty}},[t._v("清空")])]),s("div",{staticClass:"list-content"},[s("ul",t._l(t.selectFood,(function(e,n){return s("li",{directives:[{name:"show",rawName:"v-show",value:0!==e.count,expression:"food.count !== 0"}],key:n,staticClass:"shopcart-food"},[s("div",{staticClass:"name"},[t._v(t._s(e.name))]),s("div",{staticClass:"price"},[t._v("￥"+t._s(20*e.count))]),s("div",{staticClass:"cartControl-wrapper"},[s("cartControl",{attrs:{food:e}})],1)])})),0)])])])],1),s("div",{staticClass:"ball-container"},[s("transition",{on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.pos.ballFlag,expression:"pos.ballFlag"}],ref:"ball",staticClass:"ball"},[s("div",{staticClass:"inner inner-hook"})])])],1)])},u=[],f=s("eacf");function d(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function p(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?d(s,!0).forEach((function(e){Object(r["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):d(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var h={props:["selectFood","pos"],data:function(){return{deliveryPrice:5,minPrice:30,fold:!0}},computed:{totalPrice:function(){var t=0;return this.selectFood.forEach((function(e){t+=20*e.count})),t},totalCount:function(){var t=0;return this.selectFood.forEach((function(e){t+=e.count})),t},slowCount:function(){return this.minPrice-this.totalPrice},payClass:function(){return this.totalPrice<this.minPrice?"not-enough":"enough"},listShow:function(){if(!this.totalCount)return!1;var t=!this.fold;return t}},methods:p({},Object(a["b"])(["SAVE_FOODS"]),{toggleList:function(){this.totalCount&&(this.fold=!this.fold)},empty:function(){this.selectFood.forEach((function(t){t.count=0}))},goPay:function(){var t=new Date,e={date:t,name:this.$route.query.name,totalCount:this.totalCount,totalPrice:this.totalPrice,foods:this.selectFood};this.SAVE_FOODS(e),this.$router.push("/confrimOrder")},beforeEnter:function(t){t.style.left=this.pos.posX+"px",t.style.top=this.pos.posY+"px",t.style.transform="translate(0, 0)"},enter:function(t,e){var s=this.$refs.num.getBoundingClientRect(),n=this.pos.posX-s.left,o=this.pos.posY-s.top;t.style.transform="translate(".concat(-n,"px, ").concat(-o,"px)"),t.style.transition="all 0.5s cubic-bezier(.4,-0.3,1,.68)",e()},afterEnter:function(){this.pos.ballFlag=!this.pos.ballFlag}}),components:{cartControl:f["default"]}},v=h,m=(s("1bdf"),s("2877")),_=Object(m["a"])(v,l,u,!1,null,null,null),g=_.exports,b=s("724a");function C(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function w(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?C(s,!0).forEach((function(e){Object(r["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):C(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var y={data:function(){return{geohash:"",shopId:null,menuList:[],selected:0,foodList:[],imgBaseUrl:"https://elm.cangdu.org/img/",food:[],ballPosition:{ballFlag:!1},resultfoods:[],showLoading:!0}},mounted:function(){this.initData()},computed:w({},Object(a["c"])(["latitude","longitude"])),methods:{initData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.geohash=this.$route.query.geohash,this.shopId=this.$route.query.id,t.next=4,Object(c["f"])(this.shopId);case 4:e=t.sent,this.showLoading=!1,this.menuList=e.data,this.menuList.length&&(this.foodList=this.menuList[this.selected]);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),chooseSelected:function(t){this.selected=t,this.foodList=this.menuList[this.selected]},resultFoods:function(t){if(this.resultfoods.length){var e=this.resultfoods.findIndex((function(e){return e.name===t.name}));e>=0?(this.resultfoods.splice(e,1),this.resultfoods.unshift(t)):this.resultfoods.unshift(t)}else this.resultfoods.unshift(t)},position:function(t){this.ballPosition=Object.assign({},this.ballPosition,t)}},components:{ShopCart:g,cartControl:f["default"],Loading:b["a"]}},O=y,P=(s("572a"),Object(m["a"])(O,n,o,!1,null,"e93775c8",null));e["default"]=P.exports},f819:function(t,e,s){}}]);
//# sourceMappingURL=chunk-6545260d.d9fc7c04.js.map