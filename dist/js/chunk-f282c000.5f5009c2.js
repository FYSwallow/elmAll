(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f282c000","chunk-677cbe22"],{"0296":function(t,s,e){},"1bdf":function(t,s,e){"use strict";var o=e("a626"),i=e.n(o);i.a},3338:function(t,s,e){"use strict";var o=e("0296"),i=e.n(o);i.a},"3b10":function(t,s,e){},"49e1":function(t,s,e){},"724a":function(t,s,e){"use strict";var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"loading"},[e("div",{staticClass:"load_img",style:{backgroundPositionY:-100*t.positionY+"px"}})])},i=[],n={data:function(){return{positionY:0,timeid:null}},mounted:function(){var t=this;this.timeid=setInterval((function(){t.positionY++,7===t.positionY&&(t.positionY=0)}),600)}},a=n,r=(e("80d3"),e("2877")),c=Object(r["a"])(a,o,i,!1,null,"71724f19",null);s["a"]=c.exports},"78a4":function(t,s,e){"use strict";var o=e("3b10"),i=e.n(o);i.a},"7f7f":function(t,s,e){var o=e("86cc").f,i=Function.prototype,n=/^\s*function ([^ (]*)/,a="name";a in i||e("9e1e")&&o(i,a,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},"80d3":function(t,s,e){"use strict";var o=e("49e1"),i=e.n(o);i.a},a626:function(t,s,e){},eacf:function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cartControl-wrapper"},[e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count&&0!==t.food.count,expression:"food.count && food.count !== 0"}],staticClass:"cart-decrease",on:{click:function(s){return s.preventDefault(),t.decreaseCart(s)}}},[e("transition",{attrs:{name:"inner"}},[e("span",{staticClass:"inner "},[t._v("-")])])],1)]),e("span",{directives:[{name:"show",rawName:"v-show",value:0!==t.food.count,expression:"food.count !== 0"}],staticClass:"cart-count"},[t._v(t._s(t.food.count))]),e("span",{staticClass:"cart-add",on:{click:function(s){return s.preventDefault(),t.addCart(s)}}},[t._v("+")])],1)},i=[],n={props:["food"],data:function(){return{}},created:function(){},methods:{addCart:function(t){console.log(this.food),this.food.count?this.food.count++:this.$set(this.food,"count",1),console.log(t.clientX),this.$emit("result",this.food),this.$emit("func",{posX:t.clientX,posY:t.clientY,ballFlag:!0})},decreaseCart:function(){0!==this.food.count&&(this.food.count--,this.$emit("result",this.food))}}},a=n,r=(e("78a4"),e("2877")),c=Object(r["a"])(a,o,i,!1,null,null,null);s["default"]=c.exports},f63a:function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"food"}},[t._m(0),e("section",{staticClass:"food"},[e("aside",{staticClass:"tab_nav"},[e("ul",t._l(t.menuList,(function(s,o){return e("li",{key:o,staticClass:"ellipsis",class:{active:t.selected===o},on:{click:function(s){return t.chooseSelected(o)}}},[t._v("\n                    "+t._s(s.name)+"\n                    "),e("div",{staticClass:"num"})])})),0)]),e("section",{staticClass:"food_container"},[e("ul",[e("li",[e("header",{staticClass:"food_container_title"},[e("h3",[t._v(t._s(t.foodList.name))]),e("span",{staticClass:"head_middle ellipsis"},[t._v("是分身无术的放")])])]),t._l(t.foodList.foods,(function(s,o){return e("li",{key:o,staticClass:"food_list"},[e("img",{attrs:{src:t.imgBaseUrl+s.image_path}}),e("section",{staticClass:"food_detail"},[e("h3",{staticClass:"food_name"},[t._v(t._s(s.name))]),e("p",{staticClass:"food_description"},[t._v(t._s(s.description))]),e("p",{staticClass:"food_rating"},[e("span",[t._v(t._s(s.month_sales))]),e("span",[t._v("好评率"+t._s(s.satisfy_rate)+"%")])]),s.activity?e("div",{staticClass:"food_logo"},[e("span",[t._v(t._s(s.activity.image_text))])]):t._e(),t._m(1,!0),e("div",{staticClass:"shopChoose"},[e("cartControl",{attrs:{food:s},on:{func:t.position,result:t.resultFoods}})],1)])])}))],2)])]),e("ShopCart",{attrs:{pos:t.ballPosition,selectFood:t.resultfoods}}),e("transition",{attrs:{name:"loading"}},[e("loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]})],1)],1)},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("header",{staticClass:"head_nav"},[e("div",{staticClass:"tab_left active"},[e("span",[t._v("商品")])]),e("div",{staticClass:"tab_right"},[t._v("评价")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"food_price"},[e("span",[t._v("￥")]),e("span",[t._v("20 元")])])}],n=(e("8e6e"),e("456d"),e("7f7f"),e("ac6a"),e("96cf"),e("3b8d")),a=e("bd86"),r=e("2f62"),c=e("365c"),l=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"shopCart"},[e("div",{staticClass:"content",on:{click:function(s){return s.stopPropagation(),t.toggleList()}}},[e("div",{staticClass:"content-left"},[e("div",{ref:"num",staticClass:"logo-wrapper"},[e("div",{staticClass:"logo",class:{highlight:t.totalCount>0}},[e("i",{staticClass:"fa fa-cart-plus",class:{highlight:t.totalCount>0}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount>0,expression:"totalCount > 0"}],staticClass:"num"},[t._v(t._s(t.totalCount))])]),e("div",{staticClass:"price",class:{highlight:t.totalPrice>0}},[t._v("￥"+t._s(t.totalPrice))]),e("div",{staticClass:"desc"},[t._v("另需配送费￥"+t._s(t.deliveryPrice)+"元")])]),e("div",{staticClass:"content-right"},[e("div",{staticClass:"pay",class:t.payClass},[0===t.totalPrice?e("div",[t._v(t._s(t.minPrice)+"元起送")]):t._e(),t.totalPrice<t.minPrice?e("div",[t._v("还差￥"+t._s(t.slowCount)+"元起送")]):t._e(),t.totalPrice>=t.minPrice?e("div",{on:{click:function(s){return s.stopPropagation(),t.goPay(s)}}},[t._v("添加订单")]):t._e()])])]),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[e("div",{staticClass:"list-header"},[e("h1",{staticClass:"title"},[t._v("购物车")]),e("span",{staticClass:"empty",on:{click:t.empty}},[t._v("清空")])]),e("div",{staticClass:"list-content"},[e("ul",t._l(t.selectFood,(function(s,o){return e("li",{directives:[{name:"show",rawName:"v-show",value:0!==s.count,expression:"food.count !== 0"}],key:o,staticClass:"shopcart-food"},[e("div",{staticClass:"name"},[t._v(t._s(s.name))]),e("div",{staticClass:"price"},[t._v("￥"+t._s(20*s.count))]),e("div",{staticClass:"cartControl-wrapper"},[e("cartControl",{attrs:{food:s}})],1)])})),0)])])])],1),e("div",{staticClass:"ball-container"},[e("transition",{on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.pos.ballFlag,expression:"pos.ballFlag"}],ref:"ball",staticClass:"ball"},[e("div",{staticClass:"inner inner-hook"})])])],1)])},u=[],d=e("eacf");e("e52b");function f(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);s&&(o=o.filter((function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),e.push.apply(e,o)}return e}function h(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?f(e,!0).forEach((function(s){Object(a["a"])(t,s,e[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):f(e).forEach((function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))}))}return t}var p={props:["selectFood","pos"],data:function(){return{deliveryPrice:5,minPrice:20,fold:!0}},created:function(){console.log(this.selectFood)},computed:{totalPrice:function(){var t=0;return this.selectFood.forEach((function(s){t+=20*s.count})),console.log(t),t},totalCount:function(){var t=0;return this.selectFood.forEach((function(s){t+=s.count})),t},slowCount:function(){return this.totalPrice-this.totalCount},payClass:function(){return this.totalPrice<this.minPrice?"not-enough":"enough"},listShow:function(){if(!this.totalCount)return!1;var t=!this.fold;return t}},methods:h({},Object(r["b"])(["SAVE_FOODS"]),{toggleList:function(){this.totalCount&&(this.fold=!this.fold)},empty:function(){this.selectFood.forEach((function(t){t.count=0}))},goPay:function(){var t=new Date;this.$set(this.selectFood,"date",t),this.$set(this.selectFood,"name",this.$route.query.name),this.SAVE_FOODS(this.selectFood),this.$router.push("/confrimOrder")},beforeEnter:function(t){t.style.left=this.pos.posX+"px",t.style.top=this.pos.posY+"px",t.style.transform="translate(0, 0)",console.log(1)},enter:function(t,s){t.offsetWidth;var e=this.$refs.num.getBoundingClientRect();console.log(e);var o=this.pos.posX-e.left,i=this.pos.posY-e.top;t.style.transform="translate(".concat(-o,"px, ").concat(-i,"px)"),t.style.transition="all 0.5s cubic-bezier(.4,-0.3,1,.68)",s()},afterEnter:function(t){this.pos.ballFlag=!this.pos.ballFlag}}),components:{cartControl:d["default"]}},v=p,m=(e("1bdf"),e("2877")),_=Object(m["a"])(v,l,u,!1,null,null,null),g=_.exports,C=e("724a");function b(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);s&&(o=o.filter((function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),e.push.apply(e,o)}return e}function w(t){for(var s=1;s<arguments.length;s++){var e=null!=arguments[s]?arguments[s]:{};s%2?b(e,!0).forEach((function(s){Object(a["a"])(t,s,e[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):b(e).forEach((function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s))}))}return t}var y={data:function(){return{geohash:"",shopId:null,menuList:[],selected:0,foodList:[],imgBaseUrl:"https://elm.cangdu.org/img/",food:[],ballPosition:{ballFlag:!1},resultfoods:[],showLoading:!0}},created:function(){this.geohash=this.$route.query.geohash,this.shopId=this.$route.query.id,this.initData()},computed:w({},Object(r["c"])(["latitude","longitude"])),methods:{initData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["f"])(this.shopId);case 2:s=t.sent,this.showLoading=!1,this.menuList=s.data,this.foodList=this.menuList[this.selected];case 6:case"end":return t.stop()}}),t,this)})));function s(){return t.apply(this,arguments)}return s}(),chooseSelected:function(t){this.selected=t,this.foodList=this.menuList[this.selected]},resultFoods:function(t){var s=this,e=!0;this.resultfoods.length?(this.resultfoods.forEach((function(o,i){if(o.name===t.name)return s.resultfoods.splice(i,1),s.resultfoods.push(t),void(e=!1)})),e&&this.resultfoods.push(t)):this.resultfoods.push(t)},position:function(t){this.ballPosition=Object.assign({},this.ballPosition,t)}},components:{ShopCart:g,cartControl:d["default"],Loading:C["a"]}},O=y,P=(e("3338"),Object(m["a"])(O,o,i,!1,null,"f19ddd96",null));s["default"]=P.exports}}]);
//# sourceMappingURL=chunk-f282c000.5f5009c2.js.map